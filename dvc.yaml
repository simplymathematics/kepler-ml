vars:
  - conf/plots.yaml:line_plot
  - conf/plots.yaml:scatter_plot
  # - conf/plots.yaml:cat_plot
  - conf/clean.yaml:attacks
  - conf/clean.yaml:defences
  - conf/clean.yaml:params
  - conf/clean.yaml:fillna
stages:
  pre-commmit:
    cmd: pre-commit run --all-files  && chktex -q -V main.tex -n 24 -n 8 -n 1 # Suppresses warnings 8 (dash length), 24 (\labels inside floats), and 1 (trailing whitespace following and command)
    deps:
      - main.tex
      - sn-bibliography.bib
      - generate_plots/
      - plots/
  first_run:
    cmd: pdflatex  main.tex
    deps:
      - main.tex
    outs:
      - main.aux
      - main.log
      - main.out
      - main.glo
      - main.ist
  big_run:
    cmd: pdflatex main.tex && bibtex main && pdflatex  main.tex && pdflatex  main.tex 
    deps:
      - main.tex
      - sn-bibliography.bib
      - plots/
      - main.aux
      - main.log
      - main.out
      - main.glo
      - main.ist
    outs:
      - main.pdf
  arxiv:
    cmd: python arxiv.py --directories plots generate_plots data conf data_backup --extensions py yaml csv --title "Power, Compute, and Cloud"
    deps:
      - arxiv.py
      - plots/
      - main.pdf
    outs:
      - "Power, Compute, and Cloud.zip"
      - arxiv.log